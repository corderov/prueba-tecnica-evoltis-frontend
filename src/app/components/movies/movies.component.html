<div style="padding: 0px 20px;">
  <p-messages></p-messages>
  <p-table [value]="movies$ | async" [tableStyle]="{ 'min-width': '40rem' }" [globalFilterFields]="['title','genre']">
    <ng-template pTemplate="caption">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2 class="m-0">Películas</h2>
        <div class="flex align-items-center">
            <button pButton pRipple icon="pi pi-plus" class="p-button-rounded" (click)="redirectToAddForm()"></button>
        </div>
    </div>
  </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th style="min-width:15rem">
            <div style="display: flex; align-items: center;">
              Título
              <p-columnFilter type="text" field="title" display="menu"></p-columnFilter>
            </div>
          </th>
          <th style="min-width:15rem">
            <div style="display: flex; align-items: center;">
              Género
              <p-columnFilter type="text" field="genre" display="menu"></p-columnFilter>
            </div>
          </th>
          <th pSortableColumn="director" style="width:20%">Director<p-sortIcon field="director"></p-sortIcon></th>
          <th pSortableColumn="year" style="width:20%">Año<p-sortIcon field="year"></p-sortIcon></th>
          <th pSortableColumn="duration" style="width:20%">Duración (min)<p-sortIcon field="duration"></p-sortIcon></th>
          <th>Acciones</th> 
        </tr>
      </ng-template>
      <p-progressSpinner *ngIf="(loading$ | async)"></p-progressSpinner>
      <ng-template pTemplate="body" let-movie>
        <tr>
          <td>{{ movie.title }}</td>
          <td>{{ movie.genre }}</td>
          <td>{{ movie.director }}</td>
          <td>{{ movie.year }}</td>
          <td>{{movie.duration}}</td>
          <td style="display: flex; gap: 10px;">
            <p-button icon="pi pi-eye" styleClass="p-button-help" (click)="redirectToReadForm(movie.id)"></p-button>
            <p-button icon="pi pi-pencil" styleClass="p-button-warning" (click)="redirectToEditForm(movie.id)"></p-button>
            <p-button icon="pi pi-times" styleClass="p-button-danger" (click)="deleteMovie(movie)"></p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>
   
</div>


